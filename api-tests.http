### REST Client pour VS Code
### Extension: REST Client (humao.rest-client)
### 
### Variables d'environnement (√† d√©finir dans VS Code settings ou dans ce fichier)
### 
### IMPORTANT : Apr√®s le d√©ploiement de la s√©paration des API Gateways, il y a maintenant 2 URLs :
### - @baseUrlMain : API Gateway 1 (routes de l'application principale)
### - @baseUrlData : API Gateway 2 (routes de donn√©es brutes FMP + UW)
### 
### Pour obtenir les URLs apr√®s terraform apply :
###   terraform output api_gateway_url        # API Gateway 1
###   terraform output api_data_gateway_url  # API Gateway 2

### API Gateway 1 : Application Principale (signals, funds, companies, analysis, scoring, etc.)
@baseUrlMain = https://tsdd1sibd1.execute-api.eu-west-3.amazonaws.com/prod

### API Gateway 2 : Donn√©es Brutes (FMP + Unusual Whales)
### ‚ö†Ô∏è √Ä mettre √† jour apr√®s terraform apply avec : terraform output api_data_gateway_url
@baseUrlData = https://faq9dl95v7.execute-api.eu-west-3.amazonaws.com/prod

### Token d'acc√®s (√† mettre √† jour r√©guli√®rement)
@accessToken = eyJraWQiOiIwekpSMTVhYjBqSk0xdnJmaFBSa0NveGJBaHhnXC9HblhkeU56Y09iRkRyND0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJmMWU5OTA3ZS01MDIxLTcwZmUtMzA4ZS0zMzc3NzgyYmE2NjgiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0zLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtM19GUURtaHhWMTQiLCJjbGllbnRfaWQiOiJwa3A0aTgyam50dHRoajJjYmlsdHVkZ3ZhIiwib3JpZ2luX2p0aSI6ImVjOTIyYjViLWNlZTMtNDZlYS04ZGEyLTkwMzc4YmVjODg1YyIsImV2ZW50X2lkIjoiMzMxMjBmMGQtMjQwOC00Yzc1LTkyYTYtMjAxMTQ4ZmIxYzRjIiwidG9rZW5fdXNlIjoiYWNjZXNzIiwic2NvcGUiOiJhd3MuY29nbml0by5zaWduaW4udXNlci5hZG1pbiIsImF1dGhfdGltZSI6MTc2NTEwNTA5OCwiZXhwIjoxNzY1MTA4Njk4LCJpYXQiOjE3NjUxMDUwOTgsImp0aSI6ImQxMzFmNWFiLTQyZWUtNGQxZS1iZDAxLWFkMjQ4NjJmZjExNCIsInVzZXJuYW1lIjoiZjFlOTkwN2UtNTAyMS03MGZlLTMwOGUtMzM3Nzc4MmJhNjY4In0.YQpe-NkA6YjB62uy1cyEL8YPCf9gfVRiX1wb0xcw4lgAp0Eo4FDNIDBev7Q7R6fRM5f0fmq0qak47g8CKLOKAM6K8z3xQ9SMwTb6kzY-LSEwg057qmFnfIAr4yoprA6eBRKda1xaK5G4ORUqYddF86j9J-QxS8hdkiLn9mjheXp1WNXd0wNVeJFmpe8iAa2DkJjaafKwY7QvBMYNVHjsIg4J_-Mi6EfijlV5RdrNK3HNGmQ-ezN9KQsXWKSWmvbCJbZxWFExuXCSw5iCrzIOwMKOwSVZswLa02Ev3O0AwGhz6JttlVqcg9L5gfHmwpVawmFf1WsvwXRMGAFKQaOTgg

### ============================================
### ANALYSE COMBIN√âE (FMP + UW)
### ============================================

### Complete Analysis - Analyse compl√®te (fundamentals + sentiment)
### ‚úÖ API Gateway 1 (Application Principale)
GET {{baseUrlMain}}/analysis/AAPL/complete
Authorization: Bearer {{accessToken}}

### Complete Analysis - TSLA
GET {{baseUrlMain}}/analysis/TSLA/complete
Authorization: Bearer {{accessToken}}

### Complete Analysis - NVDA
GET {{baseUrlMain}}/analysis/NVDA/complete
Authorization: Bearer {{accessToken}}

### Divergence Analysis - D√©tecte les divergences fundamentals vs sentiment
GET {{baseUrlMain}}/analysis/AAPL/divergence
Authorization: Bearer {{accessToken}}

### Divergence Analysis - NVDA
GET {{baseUrlMain}}/analysis/NVDA/divergence
Authorization: Bearer {{accessToken}}

### Comprehensive Valuation - Valuation compl√®te (DCF + Sentiment Multiplier)
GET {{baseUrlMain}}/analysis/AAPL/valuation
Authorization: Bearer {{accessToken}}

### Comprehensive Valuation - MSFT
GET {{baseUrlMain}}/analysis/MSFT/valuation
Authorization: Bearer {{accessToken}}

### Earnings Prediction - Pr√©diction de surprise d'earnings
GET {{baseUrlMain}}/analysis/AAPL/earnings-prediction
Authorization: Bearer {{accessToken}}

### Earnings Prediction - Avec date sp√©cifique
GET {{baseUrlMain}}/analysis/AAPL/earnings-prediction?earningsDate=2025-01-30
Authorization: Bearer {{accessToken}}

### Earnings Prediction - TSLA
GET {{baseUrlMain}}/analysis/TSLA/earnings-prediction
Authorization: Bearer {{accessToken}}

### Risk Analysis - Analyse de risque (financier + march√©)
GET {{baseUrlMain}}/analysis/AAPL/risk
Authorization: Bearer {{accessToken}}

### Risk Analysis - TSLA
GET {{baseUrlMain}}/analysis/TSLA/risk
Authorization: Bearer {{accessToken}}

### Risk Analysis - NVDA
GET {{baseUrlMain}}/analysis/NVDA/risk
Authorization: Bearer {{accessToken}}

### ============================================
### SCREENER MULTI-CRIT√àRES
### ============================================

### Multi-Criteria Screener - Screening avec crit√®res FMP + UW
### ‚úÖ API Gateway 1 (Application Principale)
POST {{baseUrlMain}}/screener/multi-criteria
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "minMarketCap": 1000000000,
  "maxPERatio": 30,
  "minRevenueGrowth": 5,
  "limit": 10
}

### Multi-Criteria Screener - Technology sector
POST {{baseUrlMain}}/screener/multi-criteria
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "sector": "Technology",
  "minMarketCap": 10000000000,
  "maxPERatio": 25,
  "limit": 5
}

### ============================================
### INSTITUTION TRACKING
### ============================================

### Institution Tracking - Berkshire Hathaway
### ‚úÖ API Gateway 1 (Application Principale)
GET {{baseUrlMain}}/institutions/Berkshire%20Hathaway/tracking
Authorization: Bearer {{accessToken}}

### Institution Tracking - BlackRock
GET {{baseUrlMain}}/institutions/BlackRock/tracking
Authorization: Bearer {{accessToken}}

### Institution Tracking - Vanguard
GET {{baseUrlMain}}/institutions/Vanguard/tracking
Authorization: Bearer {{accessToken}}

### ============================================
### SECTOR ANALYSIS
### ============================================

### Sector Analysis - Technology
### ‚úÖ API Gateway 1 (Application Principale)
GET {{baseUrlMain}}/analysis/sector/Technology
Authorization: Bearer {{accessToken}}

### Sector Analysis - Healthcare
GET {{baseUrlMain}}/analysis/sector/Healthcare
Authorization: Bearer {{accessToken}}

### Sector Analysis - Financial
GET {{baseUrlMain}}/analysis/sector/Financial
Authorization: Bearer {{accessToken}}

### ============================================
### UNUSUAL WHALES - Endpoints de donn√©es brutes
### ============================================
### ‚ö†Ô∏è API Gateway 2 (Donn√©es Brutes) - Mettre √† jour @baseUrlData apr√®s terraform apply

### Recent Flows - Flow d'options r√©cent
GET {{baseUrlData}}/unusual-whales/stock/AAPL/flow-recent?limit=10
Authorization: Bearer {{accessToken}}

### Recent Flows - TSLA
GET {{baseUrlData}}/unusual-whales/stock/TSLA/flow-recent?limit=10&min_premium=50000
Authorization: Bearer {{accessToken}}

### Institution Ownership - Propri√©t√© institutionnelle
GET {{baseUrlData}}/unusual-whales/institution/AAPL/ownership
Authorization: Bearer {{accessToken}}

### Short Interest and Float - Int√©r√™t √† d√©couvert
GET {{baseUrlData}}/unusual-whales/shorts/AAPL/interest-float
Authorization: Bearer {{accessToken}}

### Dark Pool Trades - Transactions dark pool
GET {{baseUrlData}}/unusual-whales/dark-pool/AAPL?limit=50
Authorization: Bearer {{accessToken}}

### Insider Buy/Sells - Transactions d'insiders
GET {{baseUrlData}}/unusual-whales/stock/AAPL/insider-buy-sells
Authorization: Bearer {{accessToken}}

### Institution Activity - Activit√© institutionnelle
GET {{baseUrlData}}/unusual-whales/institution/AAPL/activity?limit=100
Authorization: Bearer {{accessToken}}

### ============================================
### FMP - Endpoints de donn√©es brutes
### ============================================
### ‚ö†Ô∏è API Gateway 2 (Donn√©es Brutes) - Mettre √† jour @baseUrlData apr√®s terraform apply

### Stock Quote - Cotation
GET {{baseUrlData}}/fmp/quote/AAPL
Authorization: Bearer {{accessToken}}

### Income Statement - √âtat des r√©sultats
GET {{baseUrlData}}/fmp/income-statement/AAPL?limit=5&period=annual
Authorization: Bearer {{accessToken}}

### Financial Ratios - Ratios financiers
GET {{baseUrlData}}/fmp/financial-ratios/AAPL?limit=5
Authorization: Bearer {{accessToken}}

### Key Metrics - M√©triques cl√©s
GET {{baseUrlData}}/fmp/key-metrics/AAPL?limit=5
Authorization: Bearer {{accessToken}}

### Balance Sheet - Bilan
GET {{baseUrlData}}/fmp/balance-sheet-statement/AAPL?limit=1
Authorization: Bearer {{accessToken}}

### Cash Flow Statement - √âtat des flux de tr√©sorerie
GET {{baseUrlData}}/fmp/cash-flow-statement/AAPL?limit=1
Authorization: Bearer {{accessToken}}

### DCF Valuation - Valorisation DCF
GET {{baseUrlData}}/fmp/dcf-valuation/AAPL
Authorization: Bearer {{accessToken}}

### Levered DCF - DCF avec effet de levier
GET {{baseUrlData}}/fmp/levered-dcf/AAPL
Authorization: Bearer {{accessToken}}

### Earnings Report - Rapport de r√©sultats
GET {{baseUrlData}}/fmp/earnings/AAPL
Authorization: Bearer {{accessToken}}

### Financial Estimates - Estimations financi√®res
GET {{baseUrlData}}/fmp/financial-estimates/AAPL?period=quarter
Authorization: Bearer {{accessToken}}

### Ratings Snapshot - Aper√ßu des notations
GET {{baseUrlData}}/fmp/ratings-snapshot/AAPL
Authorization: Bearer {{accessToken}}

### ============================================
### TICKER ACTIVITY (Legacy)
### ============================================
### ‚úÖ API Gateway 1 (Application Principale)

### Ticker Quote - Cotation
GET {{baseUrlMain}}/ticker-activity/AAPL/quote
Authorization: Bearer {{accessToken}}

### Ticker Activity - Activit√©
GET {{baseUrlMain}}/ticker-activity/AAPL/activity
Authorization: Bearer {{accessToken}}

### Ticker Options - Options
GET {{baseUrlMain}}/ticker-activity/AAPL/options?limit=10
Authorization: Bearer {{accessToken}}

### Ticker Dark Pool - Dark pool
GET {{baseUrlMain}}/ticker-activity/AAPL/dark-pool?limit=10
Authorization: Bearer {{accessToken}}

### Ticker Insights - Insights complets
GET {{baseUrlMain}}/ticker-insights/AAPL
Authorization: Bearer {{accessToken}}

### ============================================
### TESTS DE VALIDATION DES DONN√âES
### ============================================

### Test 1: V√©rifier que Recent Flows retourne des donn√©es (API Gateway 2)
GET {{baseUrlData}}/unusual-whales/stock/AAPL/flow-recent?limit=10
Authorization: Bearer {{accessToken}}

### Test 2: V√©rifier que Institution Ownership retourne des donn√©es (API Gateway 2)
GET {{baseUrlData}}/unusual-whales/institution/AAPL/ownership
Authorization: Bearer {{accessToken}}

### Test 3: V√©rifier que Short Interest retourne des donn√©es (API Gateway 2)
GET {{baseUrlData}}/unusual-whales/shorts/AAPL/interest-float
Authorization: Bearer {{accessToken}}

### Test 4: V√©rifier que Dark Pool retourne des donn√©es (API Gateway 2)
GET {{baseUrlData}}/unusual-whales/dark-pool/AAPL?limit=10
Authorization: Bearer {{accessToken}}

### Test 5: V√©rifier que Complete Analysis utilise les donn√©es UW (API Gateway 1)
GET {{baseUrlMain}}/analysis/AAPL/complete
Authorization: Bearer {{accessToken}}

### Test 6: V√©rifier que Valuation a un prix actuel valide (API Gateway 1)
GET {{baseUrlMain}}/analysis/AAPL/valuation
Authorization: Bearer {{accessToken}}

### Test 7: V√©rifier que Earnings Prediction a des signaux valides (API Gateway 1)
GET {{baseUrlMain}}/analysis/AAPL/earnings-prediction
Authorization: Bearer {{accessToken}}

### Test 8: V√©rifier que Score retourne des donn√©es (API Gateway 1)
GET {{baseUrlMain}}/ticker-analysis/AAPL/score 
Authorization: Bearer {{accessToken}}

### Test 9: V√©rifier que Breakdown retourne des donn√©es (API Gateway 1)
GET {{baseUrlMain}}/ticker-analysis/AAPL/breakdown
Authorization: Bearer {{accessToken}}

### Test 10: V√©rifier que Institution Tracking retourne des donn√©es (API Gateway 1)
GET {{baseUrlMain}}/institutions/Berkshire%20Hathaway/tracking
Authorization: Bearer {{accessToken}}

### Test 11: V√©rifier que Gamma Squeeze retourne des donn√©es (API Gateway 1)
GET {{baseUrlMain}}/ticker-analysis/TSLA/gamma-squeeze
Authorization: Bearer {{accessToken}}

### ============================================
### NOTES
### ============================================
###
### üîÄ S√âPARATION DES API GATEWAYS
### Apr√®s le d√©ploiement, il y a maintenant 2 API Gateways :
### 
### 1. API Gateway 1 (@baseUrlMain) : Routes de l'application principale
###    - /signals, /funds, /companies
###    - /ticker-activity/*, /ticker-insights/*
###    - /analysis/*, /screener/*, /institutions/*
###    - /ticker-analysis/* (score, breakdown, gamma-squeeze)
###
### 2. API Gateway 2 (@baseUrlData) : Routes de donn√©es brutes
###    - /fmp/* (toutes les routes FMP)
###    - /unusual-whales/* (toutes les routes UW)
###
### üìù INSTRUCTIONS
###
### 1. Apr√®s terraform apply, r√©cup√©rez les URLs :
###    cd infra/terraform
###    terraform output api_gateway_url        # ‚Üí Mettre dans @baseUrlMain
###    terraform output api_data_gateway_url  # ‚Üí Mettre dans @baseUrlData
###
### 2. Remplacez {{accessToken}} par votre token d'acc√®s valide
### 3. Le token expire apr√®s un certain temps, r√©g√©n√©rez-le si n√©cessaire
###
### 4. Pour utiliser des variables d'environnement dans VS Code:
###    - Ouvrez les settings (Cmd/Ctrl + ,)
###    - Cherchez "rest-client.environmentVariables"
###    - Ajoutez vos variables
###
### 5. Pour tester un endpoint:
###    - Cliquez sur "Send Request" au-dessus de la requ√™te
###    - Ou utilisez Cmd/Ctrl + Alt + R
###
### 6. Les r√©ponses s'affichent dans un onglet √† droite
###
### 7. Valeurs suspectes √† surveiller:
###    - sentiment.score = 50 (valeur par d√©faut)
###    - callVolume = 0 et putVolume = 0 (pas de donn√©es options)
###    - currentPrice = 0 (prix non extrait)
###    - totalHoldings = 0 (pas de holdings)
###    - averagePE = 0 (PE non calcul√©)
###
### üîç IDENTIFICATION RAPIDE
### - Si la route commence par /fmp/ ou /unusual-whales/ ‚Üí @baseUrlData
### - Sinon ‚Üí @baseUrlMain
###

